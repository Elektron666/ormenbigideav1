<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ ORMEN TEKSTƒ∞L - GitHub Otomatik Y√ºkleme</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <div class="max-w-2xl mx-auto bg-white rounded-2xl shadow-2xl p-8">
            <div class="text-center mb-8">
                <div class="w-20 h-20 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                    </svg>
                </div>
                <h1 class="text-3xl font-bold text-gray-900 mb-2">ORMEN TEKSTƒ∞L</h1>
                <p class="text-gray-600">GitHub Otomatik Y√ºkleme Sistemi</p>
            </div>

            <div class="space-y-6">
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                    <h3 class="font-semibold text-blue-900 mb-2">üìã Gereksinimler</h3>
                    <ul class="text-blue-800 text-sm space-y-1">
                        <li>‚úÖ GitHub hesabƒ±</li>
                        <li>‚úÖ Personal Access Token</li>
                        <li>‚úÖ Repository adƒ±</li>
                    </ul>
                </div>

                <form id="uploadForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            GitHub Username
                        </label>
                        <input 
                            type="text" 
                            id="username" 
                            required
                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                            placeholder="github_kullanici_adiniz"
                        >
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            GitHub Personal Access Token
                        </label>
                        <input 
                            type="password" 
                            id="token" 
                            required
                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                            placeholder="ghp_xxxxxxxxxxxxxxxxxxxx"
                        >
                        <p class="text-xs text-gray-500 mt-1">
                            <a href="https://github.com/settings/tokens" target="_blank" class="text-indigo-600 hover:text-indigo-800">
                                Personal Access Token olu≈üturun
                            </a> (repo permissions gerekli)
                        </p>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            Repository Adƒ±
                        </label>
                        <input 
                            type="text" 
                            id="repoName" 
                            value="ormen-tekstil-kartela-sistemi"
                            required
                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                        >
                    </div>

                    <button 
                        type="submit" 
                        id="uploadBtn"
                        class="w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 px-4 rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 font-semibold flex items-center justify-center space-x-2"
                    >
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                        </svg>
                        <span>GitHub'a Otomatik Y√ºkle</span>
                    </button>
                </form>

                <div id="progress" class="hidden">
                    <div class="bg-gray-200 rounded-full h-2">
                        <div id="progressBar" class="bg-gradient-to-r from-indigo-500 to-purple-500 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                    </div>
                    <p id="progressText" class="text-center text-sm text-gray-600 mt-2">Ba≈ülƒ±yor...</p>
                </div>

                <div id="result" class="hidden"></div>
            </div>
        </div>
    </div>

    <script>
        class GitHubUploader {
            constructor(token, username, repoName) {
                this.token = token;
                this.username = username;
                this.repoName = repoName;
                this.apiBase = 'https://api.github.com';
            }

            async createRepository() {
                const response = await fetch(`${this.apiBase}/user/repos`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `token ${this.token}`,
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        name: this.repoName,
                        description: 'üßµ ORMEN TEKSTƒ∞L - Kartela Y√∂netim Sistemi V1',
                        private: false,
                        auto_init: true,
                    }),
                });
                
                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.message || 'Repository olu≈üturulamadƒ±');
                }
                
                return response.json();
            }

            async uploadFile(filePath, content) {
                const encodedContent = btoa(unescape(encodeURIComponent(content)));
                
                const response = await fetch(`${this.apiBase}/repos/${this.username}/${this.repoName}/contents/${filePath}`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `token ${this.token}`,
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        message: `üìÅ Add ${filePath}`,
                        content: encodedContent,
                    }),
                });
                
                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(`${filePath}: ${error.message}`);
                }
                
                return response.json();
            }

            updateProgress(current, total, message) {
                const percent = Math.round((current / total) * 100);
                document.getElementById('progressBar').style.width = `${percent}%`;
                document.getElementById('progressText').textContent = `${message} (${current}/${total})`;
            }

            async uploadAllFiles() {
                // Temel dosyalar listesi
                const files = [
                    { path: 'README.md', content: this.getReadmeContent() },
                    { path: 'package.json', content: this.getPackageJsonContent() },
                    { path: 'vite.config.ts', content: this.getViteConfigContent() },
                    { path: 'capacitor.config.ts', content: this.getCapacitorConfigContent() },
                    { path: '.github/workflows/android-build.yml', content: this.getGitHubActionsContent() },
                    { path: 'index.html', content: this.getIndexHtmlContent() },
                    { path: 'src/main.tsx', content: this.getMainTsxContent() },
                    { path: 'src/App.tsx', content: this.getAppTsxContent() },
                ];

                for (let i = 0; i < files.length; i++) {
                    const file = files[i];
                    this.updateProgress(i + 1, files.length, `Y√ºkleniyor: ${file.path}`);
                    
                    try {
                        await this.uploadFile(file.path, file.content);
                        await new Promise(resolve => setTimeout(resolve, 1000)); // Rate limiting
                    } catch (error) {
                        console.error(`Hata: ${file.path}`, error);
                    }
                }
            }

            getReadmeContent() {
                return `# üßµ ORMEN TEKSTƒ∞L - Kartela Y√∂netim Sistemi V1

Modern, kullanƒ±cƒ± dostu kartela takip ve y√∂netim sistemi.

## üöÄ √ñzellikler
- M√º≈üteri y√∂netimi
- Kartela takibi
- Hareket kayƒ±tlarƒ±
- Android APK desteƒüi

## üì± APK ƒ∞ndirme
GitHub Actions otomatik olarak APK build eder. Releases sekmesinden indirebilirsiniz.

## üîê Giri≈ü
- Kullanƒ±cƒ±: ORMEN
- ≈ûifre: ORMEN666-F1
`;
            }

            getPackageJsonContent() {
                return JSON.stringify({
                    "name": "ormen-tekstil-kartela",
                    "version": "1.0.0",
                    "type": "module",
                    "scripts": {
                        "dev": "vite",
                        "build": "vite build",
                        "build:android": "vite build --base=./"
                    },
                    "dependencies": {
                        "react": "^18.3.1",
                        "react-dom": "^18.3.1",
                        "lucide-react": "^0.344.0"
                    },
                    "devDependencies": {
                        "@capacitor/android": "^7.4.1",
                        "@capacitor/cli": "^7.4.1",
                        "@capacitor/core": "^7.4.1",
                        "@vitejs/plugin-react": "^4.3.1",
                        "tailwindcss": "^3.4.1",
                        "typescript": "^5.5.3",
                        "vite": "^5.4.2"
                    }
                }, null, 2);
            }

            getViteConfigContent() {
                return `import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

export default defineConfig({
  plugins: [react()],
});`;
            }

            getCapacitorConfigContent() {
                return `import { CapacitorConfig } from '@capacitor/cli';

const config: CapacitorConfig = {
  appId: 'com.ormentekstil.kartela',
  appName: 'ORMEN TEKSTƒ∞L',
  webDir: 'dist',
  server: {
    androidScheme: 'https'
  }
};

export default config;`;
            }

            getGitHubActionsContent() {
                return `name: Build Android APK

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    - uses: actions/setup-node@v4
      with:
        node-version: '18'
    - uses: actions/setup-java@v4
      with:
        distribution: 'temurin'
        java-version: '17'
    - uses: android-actions/setup-android@v3
    
    - run: npm ci
    - run: npm run build:android
    - run: npx cap sync android
    
    - name: Build APK
      run: |
        cd android
        chmod +x ./gradlew
        ./gradlew assembleDebug
        
    - uses: actions/upload-artifact@v4
      with:
        name: ormen-tekstil-apk
        path: android/app/build/outputs/apk/debug/app-debug.apk`;
            }

            getIndexHtmlContent() {
                return `<!doctype html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ORMEN TEKSTƒ∞L - Kartela Sistemi</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>`;
            }

            getMainTsxContent() {
                return `import { StrictMode } from 'react';
import { createRoot } from 'react-dom/client';
import App from './App.tsx';

createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <App />
  </StrictMode>,
);`;
            }

            getAppTsxContent() {
                return `import React from 'react';

function App() {
  return (
    <div className="min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 flex items-center justify-center">
      <div className="text-center text-white">
        <h1 className="text-4xl font-bold mb-4">üßµ ORMEN TEKSTƒ∞L</h1>
        <p className="text-xl">Kartela Y√∂netim Sistemi V1</p>
        <p className="mt-4 text-indigo-200">GitHub'a ba≈üarƒ±yla y√ºklendi!</p>
      </div>
    </div>
  );
}

export default App;`;
            }
        }

        document.getElementById('uploadForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const token = document.getElementById('token').value;
            const repoName = document.getElementById('repoName').value;
            
            const uploadBtn = document.getElementById('uploadBtn');
            const progress = document.getElementById('progress');
            const result = document.getElementById('result');
            
            uploadBtn.disabled = true;
            uploadBtn.innerHTML = '<div class="w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"></div> Y√ºkleniyor...';
            progress.classList.remove('hidden');
            result.classList.add('hidden');
            
            try {
                const uploader = new GitHubUploader(token, username, repoName);
                
                // Repository olu≈ütur
                document.getElementById('progressText').textContent = 'Repository olu≈üturuluyor...';
                await uploader.createRepository();
                
                // Dosyalarƒ± y√ºkle
                await uploader.uploadAllFiles();
                
                // Ba≈üarƒ± mesajƒ±
                result.innerHTML = `
                    <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                        <h3 class="font-semibold text-green-900 mb-2">üéâ Ba≈üarƒ±yla Y√ºklendi!</h3>
                        <div class="text-green-800 text-sm space-y-2">
                            <p>‚úÖ Repository olu≈üturuldu</p>
                            <p>‚úÖ Dosyalar y√ºklendi</p>
                            <p>‚úÖ GitHub Actions √ßalƒ±≈ümaya ba≈üladƒ±</p>
                            <p class="mt-4">
                                <a href="https://github.com/${username}/${repoName}" target="_blank" 
                                   class="text-green-600 hover:text-green-800 font-medium">
                                    üîó Repository'yi G√∂r√ºnt√ºle
                                </a>
                            </p>
                            <p>
                                <a href="https://github.com/${username}/${repoName}/actions" target="_blank" 
                                   class="text-green-600 hover:text-green-800 font-medium">
                                    ‚ö° GitHub Actions'ƒ± ƒ∞zle
                                </a>
                            </p>
                        </div>
                    </div>
                `;
                result.classList.remove('hidden');
                
            } catch (error) {
                result.innerHTML = `
                    <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                        <h3 class="font-semibold text-red-900 mb-2">‚ùå Hata Olu≈ütu</h3>
                        <p class="text-red-800 text-sm">${error.message}</p>
                    </div>
                `;
                result.classList.remove('hidden');
            } finally {
                uploadBtn.disabled = false;
                uploadBtn.innerHTML = `
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                    </svg>
                    <span>GitHub'a Otomatik Y√ºkle</span>
                `;
                progress.classList.add('hidden');
            }
        });
    </script>
</body>
</html>